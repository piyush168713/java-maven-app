pipeline {
	agent any
	stages {
		stage("build"){
			steps {
				echo "building the application.."
                echo "Executing pipeline for branch $BRANCH_NAME"
			}
		}
	
		stage("test"){
			when {
				expression {
					BRANCH_NAME == 'main'
				}
			}
            steps {
                echo "testing the application.."
            }
        }

		stage("deploy"){
            when {
				expression {
					BRANCH_NAME == 'main'
				}
			}
            steps {
                echo "deploying the application.."
            }
        }
	}
}